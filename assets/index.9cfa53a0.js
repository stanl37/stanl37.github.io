import{r as resolveComponent,o as openBlock,c as createBlock,b as bs58,V as VueStorage,a as ref,d as defineComponent,u as useCssVars,e as createElementBlock,f as createBaseVNode,F as Fragment,g as renderList,n as normalizeClass,h as normalizeStyle,t as toDisplayString,i as unref,p as pushScopeId,j as popScopeId,k as createCommentVNode,l as computed,m as onUnmounted,q as createVNode,T as Transition,w as withCtx,s as createTextVNode,v as createRouter,x as createWebHistory,y as createApp}from"./vendor.d2167980.js";const p=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(t){if(t.ep)return;t.ep=!0;const a=n(t);fetch(t.href,a)}};p();var standard="";const _sfc_main$5={setup(e){return(o,n)=>{const r=resolveComponent("RouterView");return openBlock(),createBlock(r)}}};function getQuery(e){if(!!location.search)try{return location.search.match(`${e}=([^&]*)`)[1]}catch{return}}function getAnswer(){if(!!location.search)try{const e=location.search.match("s=([^&]*)")[1];(e==""||e==null)&&goHome();const o=bs58.decode(e);return new TextDecoder().decode(o)}catch{return}}var LetterState;(function(e){e[e.INITIAL=0]="INITIAL",e.CORRECT="correct",e.PRESENT="present",e.ABSENT="absent",e.INCORRECT="incorrect",e.HIDDEN="hidden"})(LetterState||(LetterState={}));const options={name:"ls",storage:"local"},{ls}=VueStorage.useStorage(options);function parseSentence(e){const o=e.split(" ");if(o==null)return[0,0,[]];const n=o.length;function r(a){var s=[...a].sort(function(l,c){return c.length-l.length});return s[0].length}const t=r(o);return[n,t,o]}function storeMainBoard(e,o,n,r){let t={solution:"",gameStatus:"IN_PROGRESS",rowIndex:0,board_height:0,board_length:0,currentWords:null,evaluations:null};if(!ls.get("main")){let s={};s.num_words=o,s.max_word_length=n;for(let l=0;l<r.length;l++){let c=JSON.parse(JSON.stringify(t));c.solution=r[l],c.board_height=e,c.board_length=r[l].length,c.currentWords=Array(e).fill(""),c.evaluations=Array(e).fill(Array(r[l].length).fill(null)),s[`game${l}`]=c}ls.set("main",s)}}function createMainBoardObject(){let e=ls.get("main"),o=createEmptyBoardObject(e.num_words,e.max_word_length);return updateMainBoardObject(o),o}function createEmptyBoardObject(e,o){return ref(Array.from({length:e},()=>Array.from({length:o},()=>({letter:"",state:LetterState.INITIAL})))).value}function updateMainBoardObject(e){let o=ls.get("main"),n=0;for(let r in o)r.includes("game")&&n++;for(let r=0;r<n;r++){const t=e[r],a=o[`game${r}`].solution;let s=o[`game${r}`].gameStatus;console.log(`Game${r} status:`,s);let l;switch(s){case"IN_PROGRESS":l=LetterState.HIDDEN;break;case"WON":l=LetterState.CORRECT;break;case"LOST":l=LetterState.INCORRECT;break;default:l=LetterState.INITIAL;break}for(let c=0;c<a.length;c++)t[c].letter=a[c],t[c].state=l}}var Home_vue_vue_type_style_index_0_scoped_true_lang="",_export_sfc=(e,o)=>{const n=e.__vccOpts||e;for(const[r,t]of o)n[r]=t;return n};const _withScopeId$2=e=>(pushScopeId("data-v-6eaa99ac"),e=e(),popScopeId(),e),_hoisted_1$3=_withScopeId$2(()=>createBaseVNode("header",null,[createBaseVNode("h1",null,"FLITZLE"),createBaseVNode("a",{id:"source-link",href:"https://github.com/stanl37/chain-wordle",target:"_blank"},"Source")],-1)),_hoisted_2$3={id:"board"},_hoisted_3$3=["id","onClick"],_hoisted_4$3=_withScopeId$2(()=>createBaseVNode("br",null,null,-1)),_sfc_main$4=defineComponent({setup(e){useCssVars(i=>({"159ccf89":unref(t),"7382090e":unref(a)}));let o=6,n=getQuery("s");ls.get("b58")!=n&&(g(!1),ls.set("b58",n));const[t,a,s]=parseSentence(getAnswer());storeMainBoard(o,t,a,s),console.log("Main board saved in local storage.");let l=createMainBoardObject();console.log("Main board object created: ",s);function c(i){let d={name:"game",query:{row:i}};router.push(d),console.log("Routing:",d)}function f(i){return l[i][0].state!="hidden"?["row"]:["row","grow"]}function g(i){i&&!confirm("Are you sure?")||(console.log("Resetting local storage..."),ls.clear(),location.reload())}return(i,d)=>(openBlock(),createElementBlock(Fragment,null,[_hoisted_1$3,createBaseVNode("div",_hoisted_2$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(l),(_,m)=>(openBlock(),createElementBlock("div",{class:normalizeClass(f(m)),id:m,onClick:u=>c(m)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(_,(u,h)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["tile",u.letter&&"filled",u.state&&"revealed"])},[createBaseVNode("div",{class:"front",style:normalizeStyle({transitionDelay:`${h*300}ms`})},toDisplayString(u.letter),5),createBaseVNode("div",{class:normalizeClass(["back",u.state]),style:normalizeStyle({transitionDelay:`${h*300}ms`,animationDelay:`${h*100}ms`})},toDisplayString(u.letter),7)],2))),256))],10,_hoisted_3$3))),256))]),_hoisted_4$3,createBaseVNode("footer",null,[createBaseVNode("a",{onClick:d[0]||(d[0]=_=>g(!0))},"reset")])],64))}});var Home=_export_sfc(_sfc_main$4,[["__scopeId","data-v-6eaa99ac"]]);const scriptRel="modulepreload",seen={},base="/",__vitePreload=function(o,n){return!n||n.length===0?o():Promise.all(n.map(r=>{if(r=`${base}${r}`,r in seen)return;seen[r]=!0;const t=r.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${a}`))return;const s=document.createElement("link");if(s.rel=t?"stylesheet":scriptRel,t||(s.as="script",s.crossOrigin=""),s.href=r,document.head.appendChild(s),t)return new Promise((l,c)=>{s.addEventListener("load",l),s.addEventListener("error",c)})})).then(()=>o())};var Keyboard_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$1=e=>(pushScopeId("data-v-a53e1dee"),e=e(),popScopeId(),e),_hoisted_1$2={id:"keyboard"},_hoisted_2$2={class:"row"},_hoisted_3$2={key:0,class:"spacer"},_hoisted_4$2=["onClick"],_hoisted_5$1={key:0},_hoisted_6$1={key:1,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},_hoisted_7=_withScopeId$1(()=>createBaseVNode("path",{fill:"currentColor",d:"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H7.07L2.4 12l4.66-7H22v14zm-11.59-2L14 13.41 17.59 17 19 15.59 15.41 12 19 8.41 17.59 7 14 10.59 10.41 7 9 8.41 12.59 12 9 15.59z"},null,-1)),_hoisted_8=[_hoisted_7],_hoisted_9={key:1,class:"spacer"},_sfc_main$3=defineComponent({props:{letterStates:null},emits:["key"],setup(e){const o=["qwertyuiop".split(""),"asdfghjkl".split(""),["Enter",..."zxcvbnm".split(""),"Backspace"]];return(n,r)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[(openBlock(),createElementBlock(Fragment,null,renderList(o,(t,a)=>createBaseVNode("div",_hoisted_2$2,[a===1?(openBlock(),createElementBlock("div",_hoisted_3$2)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(t,s=>(openBlock(),createElementBlock("button",{class:normalizeClass([s.length>1&&"big",e.letterStates[s]]),onClick:l=>n.$emit("key",s)},[s!=="Backspace"?(openBlock(),createElementBlock("span",_hoisted_5$1,toDisplayString(s),1)):(openBlock(),createElementBlock("svg",_hoisted_6$1,_hoisted_8))],10,_hoisted_4$2))),256)),a===1?(openBlock(),createElementBlock("div",_hoisted_9)):createCommentVNode("",!0)])),64))]))}});var Keyboard=_export_sfc(_sfc_main$3,[["__scopeId","data-v-a53e1dee"]]),Game_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId=e=>(pushScopeId("data-v-6c0bd0e6"),e=e(),popScopeId(),e),_hoisted_1$1={key:0,class:"message"},_hoisted_2$1={key:0},_hoisted_3$1=_withScopeId(()=>createBaseVNode("h1",null,"FLITZLE",-1)),_hoisted_4$1={id:"board"},_sfc_main$2=defineComponent({setup(__props){useCssVars(e=>({"26859e73":unref(guesses),"04194869":unref(word_length)}));const row_idx=getQuery("row");let data=ls.get("main");const game_data=data[`game${row_idx}`];let guesses=game_data.board_height;const answer=game_data.solution,word_length=game_data.board_length;console.log("Answer for this game:",answer),console.log("word_length:",word_length);let allWords;async function getAllWords(){await __vitePreload(()=>import("./words_data.c9dc5ea6.js"),[]),allWords=eval("myData.allWords"+word_length.toString()),console.log("allWords:",allWords)}getAllWords();let board=createEmptyBoardObject(guesses,word_length),currentRowIndex=ref(0);const currentRow=computed(()=>board[currentRowIndex.value]);if(game_data.rowIndex!=0){currentRowIndex.value=game_data.rowIndex;for(let e=0;e<currentRowIndex.value;e++){let o=game_data.currentWords[e];currentRowIndex.value=e;for(let n in o)fillTile(o[n].toLowerCase());currentRowIndex.value=game_data.rowIndex}for(let e=0;e<currentRowIndex.value;e++){let o=game_data.evaluations[e];currentRowIndex.value=e,currentRow.value.forEach((n,r)=>{n.state=o[r]}),currentRowIndex.value=game_data.rowIndex}}let message=ref(""),grid=ref(""),shakeRowIndex=ref(-1),success=ref(!1);const letterStates=ref({});let allowInput=!0;const onKeyup=e=>onKey(e.key);window.addEventListener("keyup",onKeyup),onUnmounted(()=>{window.removeEventListener("keyup",onKeyup)});function onKey(e){!allowInput||(/^[a-zA-Z]$/.test(e)?fillTile(e.toLowerCase()):e==="Backspace"?clearTile():e==="Enter"&&completeRow())}function fillTile(e){for(const o of currentRow.value)if(!o.letter){o.letter=e;break}}function clearTile(){for(const e of[...currentRow.value].reverse())if(e.letter){e.letter="";break}}function completeRow(){if(!~currentRow.value.every(t=>t.letter)){shake(),showMessage("Not enough letters");return}const e=currentRow.value.map(t=>t.letter).join("");if(!allWords.includes(e)&&e!==answer){shake(),showMessage("Not in word list!");return}let o=[];const n=answer.split("");currentRow.value.forEach((t,a)=>{n[a]===t.letter&&(o[a]="correct",t.state=letterStates.value[t.letter]=LetterState.CORRECT,n[a]=null)}),currentRow.value.forEach((t,a)=>{!t.state&&n.includes(t.letter)&&(o[a]="present",t.state=LetterState.PRESENT,n[n.indexOf(t.letter)]=null,letterStates.value[t.letter]||(letterStates.value[t.letter]=LetterState.PRESENT))}),currentRow.value.forEach((t,a)=>{t.state||(o[a]="absent",t.state=LetterState.ABSENT,letterStates.value[t.letter]||(letterStates.value[t.letter]=LetterState.ABSENT))}),allowInput=!1;let r="";switch(currentRow.value.every(t=>t.state===LetterState.CORRECT)?r="WON":game_data.rowIndex<board.length-1?r="IN_PROGRESS":r="LOST",data[`game${row_idx}`].currentWords[currentRowIndex.value]=e,data[`game${row_idx}`].evaluations[currentRowIndex.value]=o,data[`game${row_idx}`].gameStatus=r,data[`game${row_idx}`].rowIndex++,r){case"WON":setTimeout(()=>{grid.value=genResultGrid();let t=["Genius","Magnificent","Impressive","Splendid","Great","Wonderful","Amazing","Awesome","Bravo","Superb","Spectacular","Sensational","Dazzling"];const a=Math.floor(Math.random()*t.length);showMessage("You won! \u{1F603} "+t[a]+"!",-1),success.value=!0},1600),setTimeout(()=>{getQuery("row")==row_idx&&back()},1e4);break;case"IN_PROGRESS":currentRowIndex.value++,setTimeout(()=>{allowInput=!0},1600);break;case"LOST":setTimeout(()=>{showMessage("You lost! \u{1F614} Answer: "+answer.toUpperCase(),-1)},1600),guesses+=1,setTimeout(()=>{board[guesses-1]=Array(answer.length);for(let t=0;t<answer.length;t++)board[guesses-1][t]={letter:answer[t],state:LetterState.INCORRECT}},1600),data[`game${row_idx}`].rowIndex++,data[`game${row_idx}`].board_height++,data[`game${row_idx}`].currentWords.push(answer),data[`game${row_idx}`].evaluations.push(Array(word_length).fill("incorrect")),setTimeout(()=>{getQuery("row")==row_idx&&back()},1e4);break}ls.set("main",data)}function showMessage(e,o=1e3){message.value=e,o>0&&setTimeout(()=>{message.value=""},o)}function shake(){shakeRowIndex.value=currentRowIndex.value,setTimeout(()=>{shakeRowIndex.value=-1},1e3)}const icons={[LetterState.CORRECT]:"\u{1F7E9}",[LetterState.PRESENT]:"\u{1F7E8}",[LetterState.ABSENT]:"\u2B1C",[LetterState.INITIAL]:null};function genResultGrid(){return board.slice(0,currentRowIndex.value+1).map(e=>e.map(o=>icons[o.state]).join("")).join(`
`)}function back(){router.go(-1)}return(e,o)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(Transition,null,{default:withCtx(()=>[message.value?(openBlock(),createElementBlock("div",_hoisted_1$1,[createTextVNode(toDisplayString(message.value)+" ",1),grid.value?(openBlock(),createElementBlock("pre",_hoisted_2$1,toDisplayString(grid.value),1)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),_:1}),createBaseVNode("header",null,[_hoisted_3$1,createBaseVNode("a",{id:"back-btn",href:"javascript:void(0);",onClick:back},"Back")]),createBaseVNode("div",_hoisted_4$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(board),(n,r)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["row",shakeRowIndex.value===r&&"shake",success.value&&currentRowIndex.value===r&&"jump"])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(n,(t,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["tile",t.letter&&"filled",t.state&&"revealed"])},[createBaseVNode("div",{class:"front",style:normalizeStyle({transitionDelay:`${a*300}ms`})},toDisplayString(t.letter),5),createBaseVNode("div",{class:normalizeClass(["back",t.state]),style:normalizeStyle({transitionDelay:`${a*300}ms`,animationDelay:`${a*100}ms`})},toDisplayString(t.letter),7)],2))),256))],2))),256))]),createVNode(Keyboard,{onKey,"letter-states":letterStates.value},null,8,["letter-states"])],64))}});var Game=_export_sfc(_sfc_main$2,[["__scopeId","data-v-6c0bd0e6"]]);const _sfc_main$1={},_hoisted_1=createBaseVNode("div",null,"how did you get here?",-1),_hoisted_2=createBaseVNode("img",{src:"https://i.kym-cdn.com/photos/images/newsfeed/001/495/407/60d.gif"},null,-1),_hoisted_3=createBaseVNode("div",null,"ask for another link \u{1F612}",-1),_hoisted_4=createTextVNode("About"),_hoisted_5=createBaseVNode("br",null,null,-1),_hoisted_6=createBaseVNode("a",{href:"http://localhost:3000/?s=6RR3MbFXByBuyusNuRoseNu34tkpvDXqz3XhCCDi"},"here",-1);function _sfc_render$1(e,o){const n=resolveComponent("RouterLink");return openBlock(),createElementBlock(Fragment,null,[_hoisted_1,_hoisted_2,_hoisted_3,createVNode(n,{to:"about"},{default:withCtx(()=>[_hoisted_4]),_:1}),_hoisted_5,_hoisted_6],64)}var Landing=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]);const _sfc_main={};function _sfc_render(e,o){return openBlock(),createElementBlock("div",null,"About")}var About=_export_sfc(_sfc_main,[["render",_sfc_render]]);const router=createRouter({history:createWebHistory(),routes:[{path:"/",name:"home",component:Home},{path:"/game",name:"game",component:Game},{path:"/about",name:"about",component:About},{path:"/landing",name:"landing",component:Landing},{path:"/:pathMatch(.*)*",name:"not-found",component:Landing},{path:"/:pathMatch(.*)",name:"bad-not-found",component:Landing}]});window.addEventListener("resize",onResize);onResize();function onResize(){document.body.style.setProperty("--vh",window.innerHeight+"px")}const app=createApp(_sfc_main$5);app.use(router);app.use(VueStorage,{storage:"local"});app.mount("#app");
